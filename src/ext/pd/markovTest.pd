#N canvas 0 0 1920 1007 12;
#X declare -lib mrpeach;
#X text 114 12 <-- import mrpeach objects;
#X obj 9 79 unpackOSC;
#X text 85 78 <-- unpack the OSC message;
#X obj 9 13 import mrpeach;
#X obj 9 46 udpreceive 9129;
#N canvas 0 0 450 300 (subpatch) 0;
#X array notes 128 float 2;
#X coords 0 128 128 -1 200 50 1 0 0;
#X restore 2 577 graph;
#X obj 9 535 tabwrite notes;
#X floatatom 92 446 5 0 0 0 - - -;
#X text 100 423 index;
#X text 35 492 value;
#X obj 120 348 + 1;
#X obj 90 273 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 9 176 routeOSC /note;
#N canvas 0 0 450 300 (subpatch) 0;
#X array subdivisions 128 float 2;
#X coords 0 16 128 -1 200 50 1 0 0;
#X restore 223 579 graph;
#X text 272 389 value;
#X obj 222 528 tabwrite subdivisions;
#X text 113 40 .;
#X text 22 47 .;
#X obj 9 210 unpack f f f;
#X text 102 209 first is note \, second is subdivision \, third is
velocity;
#N canvas 0 0 450 300 (subpatch) 0;
#X array velocities 128 float 2;
#X coords 0 128 128 -1 200 50 1 0 0;
#X restore 441 579 graph;
#X text 433 370 value;
#X obj 440 528 tabwrite velocities;
#X text -246 129 reset arrays;
#X obj -237 349 f 0;
#X obj -202 350 + 1;
#X obj -240 272 until;
#X obj -375 408 tabwrite notes;
#X obj -242 169 loadbang;
#X obj -153 206 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text -428 339 -1 : no note;
#X floatatom -167 269 5 0 0 0 - - -;
#X obj -375 465 tabwrite subdivisions;
#X obj -374 435 tabwrite velocities;
#X obj -346 367 f -1;
#X obj -151 131 routeOSC /resetNotes;
#X text 121 176 receive note;
#X obj 987 697 makenote;
#X text 1273 399 bpm;
#X obj 1181 600 tabread subdivisions;
#X text 875 507 current note index;
#X obj 971 607 tabread velocities;
#X obj 843 607 tabread notes;
#X obj 926 336 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -116 265 f 0;
#X obj 9 248 t b f;
#X obj 88 345 f 0;
#X obj 5 492 f;
#X obj 242 390 f;
#X obj 407 368 f;
#X obj 1098 689 expr 1000*60/($f1*$f2);
#X obj 90 384 mod 128;
#X obj -241 241 f 128;
#X obj 1115 636 spigot;
#X text 951 333 generate midi note;
#X obj 189 103 routeOSC /setBpm;
#X obj -100 663 mtof;
#X obj 846 396 f 0;
#X obj 881 397 + 1;
#X obj 1009 504 f \$1;
#X floatatom 879 474 5 0 0 0 - - -;
#X obj 838 446 mod;
#X floatatom 933 464 5 0 0 0 - - -;
#X obj 994 443 + 1;
#X obj 937 406 \$1;
#X obj 277 130 unpack f;
#X floatatom 1226 400 5 0 0 0 - - -;
#X obj 916 291 metro;
#X obj 868 186 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 887 184 SEQUENCER: PLAY;
#X obj 476 95 routeOSC /sequencerPlay;
#X obj 884 28 routeOSC /dronePlay;
#X obj 1097 66 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 1119 65 DRONE: PLAY;
#X obj -74 700 osc~;
#X obj -76 781 dac~ 1 2;
#X obj -80 735 *~ 0.03;
#X obj -235 697 unpack f f f;
#X text -142 696;
#X text -123 663;
#X obj -235 663 routeOSC /bass;
#X obj -244 744 mtof;
#X obj -218 781 osc~;
#X obj -220 862 dac~ 1 2;
#X obj -224 816 *~ 0.05;
#X connect 1 0 12 0;
#X connect 1 0 35 0;
#X connect 1 0 55 0;
#X connect 1 0 70 0;
#X connect 1 0 71 0;
#X connect 1 0 80 0;
#X connect 4 0 1 0;
#X connect 7 0 6 1;
#X connect 7 0 15 1;
#X connect 7 0 22 1;
#X connect 7 0 64 0;
#X connect 10 0 46 1;
#X connect 11 0 46 0;
#X connect 11 0 47 0;
#X connect 11 0 48 0;
#X connect 11 0 49 0;
#X connect 12 0 18 0;
#X connect 18 0 45 0;
#X connect 18 0 56 0;
#X connect 18 1 48 1;
#X connect 18 2 49 1;
#X connect 24 0 25 0;
#X connect 24 0 27 1;
#X connect 24 0 33 1;
#X connect 24 0 32 1;
#X connect 25 0 24 1;
#X connect 26 0 24 0;
#X connect 26 0 34 0;
#X connect 28 0 29 0;
#X connect 29 0 31 0;
#X connect 29 0 44 0;
#X connect 29 0 52 0;
#X connect 31 0 24 1;
#X connect 34 0 27 0;
#X connect 34 0 33 0;
#X connect 34 0 32 0;
#X connect 35 0 29 0;
#X connect 39 0 53 1;
#X connect 39 0 50 1;
#X connect 41 0 37 1;
#X connect 42 0 37 0;
#X connect 43 0 59 0;
#X connect 43 0 57 0;
#X connect 43 0 66 0;
#X connect 44 0 46 1;
#X connect 45 0 11 0;
#X connect 45 1 47 1;
#X connect 46 0 10 0;
#X connect 46 0 51 0;
#X connect 47 0 6 0;
#X connect 48 0 15 0;
#X connect 49 0 22 0;
#X connect 50 0 37 2;
#X connect 50 0 67 1;
#X connect 51 0 7 0;
#X connect 52 0 26 0;
#X connect 53 0 50 0;
#X connect 55 0 65 0;
#X connect 56 0 74 0;
#X connect 57 0 58 0;
#X connect 57 0 61 0;
#X connect 58 0 57 1;
#X connect 59 0 42 0;
#X connect 59 0 41 0;
#X connect 59 0 39 0;
#X connect 60 0 59 1;
#X connect 61 0 60 0;
#X connect 62 0 61 1;
#X connect 63 0 62 0;
#X connect 64 0 63 0;
#X connect 65 0 66 0;
#X connect 66 0 53 0;
#X connect 67 0 43 0;
#X connect 68 0 67 0;
#X connect 70 0 68 0;
#X connect 71 0 72 0;
#X connect 74 0 76 0;
#X connect 76 0 75 0;
#X connect 76 0 75 1;
#X connect 77 0 81 0;
#X connect 80 0 77 0;
#X connect 81 0 82 0;
#X connect 82 0 84 0;
#X connect 84 0 83 0;
#X connect 84 0 83 1;
